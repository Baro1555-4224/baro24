<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œí˜•ì´ì‚¬ ê²¬ì  ì‹ ì²­ ì™„ë£Œ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</head>
<body>
    <div class="quote-form-container">
        <div class="complete-container">
            <div class="complete-icon">
                <i data-lucide="check-circle" class="success-icon"></i>
            </div>
            <h2 class="complete-title">ê²¬ì  ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
            <p class="complete-message">
                ë¹ ë¥¸ ì‹œê°„ ë‚´ì— ì—°ë½ë“œë¦¬ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br>
                ê°ì‚¬í•©ë‹ˆë‹¤.
            </p>
            <button type="button" class="nav-button home-button" onclick="location.href='index.html'">
                <i data-lucide="home"></i> í™ˆìœ¼ë¡œ
            </button>
        </div>
        <div class="quote-summary">
            <h3>ê²¬ì  ì‹ ì²­ ë‚´ìš©</h3>
            <div class="summary-content">
                <dl>
                    <dt>ì´ì‚¬ ì¢…ë¥˜</dt>
                    <dd id="summaryMoveType"></dd>
                    
                    <dt>ì´ì‚¬ í¬ë§ì¼</dt>
                    <dd id="summaryMoveDate"></dd>
                    
                    <dt>ë‚ ì§œ ë³€ë™ ê°€ëŠ¥</dt>
                    <dd id="summaryFlexible"></dd>
                    
                    <dt>ë³´ê´€ì´ì‚¬ í•„ìš”</dt>
                    <dd id="summaryStorage"></dd>
                    
                    <dt>ì¶œë°œì§€</dt>
                    <dd id="summaryStart"></dd>
                    <dt>ì¶œë°œì§€ ì¸µìˆ˜</dt>
                    <dd id="summaryStartFloor"></dd>
                    <dt>ì¶œë°œì§€ ì—˜ë¦¬ë² ì´í„°</dt>
                    <dd id="summaryStartElevator"></dd>
                    
                    <dt>ë„ì°©ì§€</dt>
                    <dd id="summaryEnd"></dd>
                    <dt>ë„ì°©ì§€ ì¸µìˆ˜</dt>
                    <dd id="summaryEndFloor"></dd>
                    <dt>ë„ì°©ì§€ ì—˜ë¦¬ë² ì´í„°</dt>
                    <dd id="summaryEndElevator"></dd>
                    
                    <dt>ì„ íƒí•œ ë¬¼í’ˆ</dt>
                    <dd id="summaryItems"></dd>
                    
                    <dt>ì„±í•¨</dt>
                    <dd id="summaryName"></dd>
                    
                    <dt>ì—°ë½ì²˜</dt>
                    <dd id="summaryPhone"></dd>
                    
                    <dt>1í†¤ ìš©ë‹¬ ëŒ€ìˆ˜</dt>
                    <dd id="summaryTruckCount"></dd>
                    
                    <dt>ë©”ëª¨</dt>
                    <dd id="summaryMemo"></dd>
                </dl>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const data = JSON.parse(localStorage.getItem('moveQuoteData') || '{}');
        
        // URLì—ì„œ ìƒˆë¡œìš´ ê²¬ì ì‹ ì²­ì¸ì§€ í™•ì¸
        const urlParams = new URLSearchParams(window.location.search);
        const isNewQuote = urlParams.get('new') === 'true';
        
        // ìƒˆë¡œìš´ ê²¬ì ì‹ ì²­ì¼ ë•Œë§Œ ë””ìŠ¤ì½”ë“œë¡œ ì „ì†¡
        if (data.name && isNewQuote) {
            const message = {
                embeds: [{
                    title: "ğŸ“¦ ì†Œí˜• ì´ì‚¬ ê²¬ì ì‹ ì²­",
                    color: 0xffa500,
                    description: 
                        `**ì´ì‚¬ì¢…ë¥˜**: ${data.moveType}\n` +
                        `**ì‹ ì²­ì**: ${data.name} / ${data.phone}\n` +
                        `**ì´ì‚¬ì¼ì •**: ${data.moveDate} (${data.isFlexible ? 'ë‚ ì§œë³€ë™ê°€ëŠ¥' : 'ë‚ ì§œí™•ì •'}) / ${data.needsStorage ? 'ë³´ê´€ì´ì‚¬í•„ìš”' : 'ë³´ê´€ì´ì‚¬ì—†ìŒ'}\n\n` +
                        `**ì„ íƒí•œ ê°€êµ¬**:\n${data.selectedItems?.filter(item => ['ì¹¨ëŒ€', 'ì˜·ì¥', 'ì±…ì¥', 'ì±…ìƒ', 'ì˜ì', 'í…Œì´ë¸”', 'ì†ŒíŒŒ', 'í™”ì¥ëŒ€', 'ìˆ˜ë‚©ì¥', 'ì„œëì¥'].includes(item.name))
                            .map(item => {
                                let text = `â¤· ${item.name}`;
                                if (item.options) {
                                    const optionTexts = [];
                                    if (item.options.size) optionTexts.push(item.options.size);
                                    if (item.options.type) optionTexts.push(item.options.type);
                                    if (item.options.frame) optionTexts.push(item.options.frame);
                                    if (item.options.assembly) optionTexts.push(item.options.assembly === 'í•„ìš”' ? 'ë¶„í•´í•„ìš”' : 'ë¶„í•´ë¶ˆí•„ìš”');
                                    if (item.options.width) optionTexts.push(`ë„ˆë¹„ ${item.options.width}`);
                                    if (item.options.height) optionTexts.push(`ë†’ì´ ${item.options.height}`);
                                    if (item.options.quantity) optionTexts.push(`${item.options.quantity}ê°œ`);
                                    if (optionTexts.length) text += ` (${optionTexts.join(', ')})`;
                                }
                                return text;
                            }).join('\n') || 'ì—†ìŒ'}\n\n` +
                        `**ì„ íƒí•œ ê°€ì „**:\n${data.selectedItems?.filter(item => ['TV/ëª¨ë‹ˆí„°', 'ì„¸íƒê¸°', 'ê±´ì¡°ê¸°', 'ì—ì–´ì»¨', 'ëƒ‰ì¥ê³ '].includes(item.name))
                            .map(item => {
                                let text = `â¤· ${item.name}`;
                                if (item.options) {
                                    const optionTexts = [];
                                    if (item.options.type) optionTexts.push(item.options.type);
                                    if (item.options.size) optionTexts.push(item.options.size);
                                    if (item.options.assembly) optionTexts.push(item.options.assembly === 'í•„ìš”' ? 'ë¶„í•´í•„ìš”' : 'ë¶„í•´ë¶ˆí•„ìš”');
                                    if (item.options.separation) optionTexts.push(item.options.separation === 'í•„ìš”' ? 'ë¶„ë¦¬í•„ìš”' : 'ë¶„ë¦¬ë¶ˆí•„ìš”');
                                    if (item.options.quantity) optionTexts.push(`${item.options.quantity}ê°œ`);
                                    if (optionTexts.length) text += ` (${optionTexts.join(', ')})`;
                                }
                                return text;
                            }).join('\n') || 'ì—†ìŒ'}\n\n` +
                        `**ì„ íƒí•œ ì†Œí˜•ê°€ì „**:\n${data.selectedItems?.filter(item => !['ì¹¨ëŒ€', 'ì˜·ì¥', 'ì±…ì¥', 'ì±…ìƒ', 'ì˜ì', 'í…Œì´ë¸”', 'ì†ŒíŒŒ', 'í™”ì¥ëŒ€', 'ìˆ˜ë‚©ì¥', 'ì„œëì¥', 'TV/ëª¨ë‹ˆí„°', 'ì„¸íƒê¸°', 'ê±´ì¡°ê¸°', 'ì—ì–´ì»¨', 'ëƒ‰ì¥ê³ '].includes(item.name))
                            .map(item => {
                                let text = `â¤· ${item.name}`;
                                if (item.options && item.options.quantity) {
                                    text += ` ${item.options.quantity}ê°œ`;
                                }
                                return text;
                            }).join('\n') || 'ì—†ìŒ'}\n\n` +
                        `**ì”ì§ë°•ìŠ¤**: ${data.boxCount || 'ì—†ìŒ'}\n\n` +
                        `**ì¶œë°œì§€**: ${data.startAddress}\n` +
                        `â¤· ${data.startFloor === '-1' ? 'ë°˜ì§€í•˜' : data.startFloor + 'ì¸µ'}${data.startHalfStairs ? ' (ë°˜ê³„ë‹¨)' : ''} / ${data.startElevator === 'yes' ? 'ì—˜ë² â—‹' : 'ì—˜ë² Ã—'}\n\n` +
                        `**ë„ì°©ì§€**: ${data.endAddress}\n` +
                        `â¤· ${data.endFloor === '-1' ? 'ë°˜ì§€í•˜' : data.endFloor + 'ì¸µ'}${data.endHalfStairs ? ' (ë°˜ê³„ë‹¨)' : ''} / ${data.endElevator === 'yes' ? 'ì—˜ë² â—‹' : 'ì—˜ë² Ã—'}\n\n` +
                        `**1í†¤ ìš©ë‹¬**: ${data.truckCount}ëŒ€\n` +
                        `**ë©”ëª¨**: ${data.memo || 'ì—†ìŒ'}`,
                    timestamp: new Date().toISOString()
                }]
            };

            fetch("https://discord.com/api/webhooks/1316231070441803816/3ELVqV5Qu73OT5L1ekSKGeqRfDXgyQMdNmRZBu840XZpsMgBbFqdiOIKVSNGkT_Tw1Ck", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(message)
            })
            .catch(error => console.error('ë””ìŠ¤ì½”ë“œ ì›¹í›… ì „ì†¡ ì‹¤íŒ¨:', error));
        }

        // ê¸°ë³¸ ì •ë³´ í‘œì‹œ
        document.getElementById('summaryMoveDate').textContent = data.moveDate || '-';
        document.getElementById('summaryFlexible').textContent = data.isFlexible ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤';
        document.getElementById('summaryStorage').textContent = data.needsStorage ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤';
        document.getElementById('summaryMoveType').textContent = data.moveType || '-';
        
        // ì£¼ì†Œ ì •ë³´
        document.getElementById('summaryStart').textContent = data.startAddress || '-';
        document.getElementById('summaryStartFloor').textContent = 
            `${data.startFloor}ì¸µ${data.startHalfStairs ? ' (ë°˜ê³„ë‹¨)' : ''}`;
        document.getElementById('summaryStartElevator').textContent = 
            data.startElevator === 'yes' ? 'ìˆìŒ' : 'ì—†ìŒ';
        
        document.getElementById('summaryEnd').textContent = data.endAddress || '-';
        document.getElementById('summaryEndFloor').textContent = 
            `${data.endFloor}ì¸µ${data.endHalfStairs ? ' (ë°˜ê³„ë‹¨)' : ''}`;
        document.getElementById('summaryEndElevator').textContent = 
            data.endElevator === 'yes' ? 'ìˆìŒ' : 'ì—†ìŒ';
        
        // ì„ íƒí•œ ë¬¼í’ˆ ëª©ë¡ê³¼ ì˜µì…˜ í‘œì‹œ
        const itemsContainer = document.getElementById('summaryItems');
        if (data.selectedItems && data.selectedItems.length > 0) {
            const itemsList = data.selectedItems.map(item => {
                let itemText = item.name;
                if (item.options) {
                    if (item.options.quantity) {
                        itemText += ` ${item.options.quantity}ê°œ`;
                    }
                    if (item.options.size) {
                        itemText += ` (${item.options.size})`;
                    }
                    if (item.options.type) {
                        itemText += ` (${item.options.type})`;
                    }
                }
                return itemText;
            });
            
            // ë°•ìŠ¤ ê°œìˆ˜ ì¶”ê°€
            if (data.boxCount) {
                itemsList.push(`ì”ì§(ë°•ìŠ¤) ${data.boxCount}ë°•ìŠ¤`);
            }
            
            itemsContainer.innerHTML = itemsList.join('<br>');
        } else {
            itemsContainer.textContent = '-';
        }
        
        // ê°œì¸ ì •ë³´
        document.getElementById('summaryName').textContent = data.name || '-';
        document.getElementById('summaryPhone').textContent = data.phone || '-';
        document.getElementById('summaryTruckCount').textContent = data.truckCount ? `${data.truckCount}ëŒ€` : '-';
        document.getElementById('summaryMemo').textContent = data.memo || '-';
        
        localStorage.removeItem('moveQuoteData');
    });
    </script>
</body>
</html> 