<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소형이사 견적 신청</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        .items-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 30px;
        }

        .item-card {
            position: relative;
            background: #fff;
            border: 2px solid #eef0f3;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            padding-bottom: 60px;
        }

        .item-card:hover {
            border-color: #4a90e2;
            transform: translateY(-2px);
        }

        .item-card.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
        }

        .item-card input[type="checkbox"] {
            position: absolute;
            opacity: 0;
        }

        /* 아이콘 기본 스타일 수정 */
        .item-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 모든 아이콘 이미지 크기 통일 */
        .item-card .item-icon img,
        .simple-item .item-icon img {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }

        /* 선택된 아이콘 색상 변경 효과 통일 */
        .item-card.selected .item-icon img,
        .simple-item.selected .item-icon img {
            filter: brightness(0) saturate(100%) invert(47%) sepia(82%) 
                    saturate(1162%) hue-rotate(182deg) brightness(96%) contrast(98%);
        }

        .item-name {
            font-size: 14px;
            color: #2c3e50;
            margin: 0;
            font-weight: 500;
        }

        .box-count-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .box-count-option {
            background: #fff;
            border: 2px solid #eef0f3;
            border-radius: 12px;
            padding: 20px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .box-count-option:hover {
            border-color: #4a90e2;
        }

        .box-count-option.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
        }

        .box-count-option h4 {
            margin: 0 0 8px 0;
            font-size: 16px;
            color: #2c3e50;
        }

        .box-count-option p {
            margin: 0;
            font-size: 14px;
            color: #5c6c7c;
        }

        @media (max-width: 768px) {
            .items-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .item-card {
                padding: 12px;
                font-size: 13px;
            }
            
            .item-icon {
                width: 32px;
                height: 32px;
                margin: 0 auto 8px;
            }
            
            /* 모바일에서 아이콘 크기 조정 */
            .item-card .item-icon img,
            .simple-item .item-icon img {
                width: 24px;
                height: 24px;
            }
            
            .item-name {
                font-size: 12px;
            }
            
            .box-count-selector {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .box-count-option {
                padding: 12px 8px;
            }
            
            .box-count-option h4 {
                font-size: 14px;
                margin-bottom: 4px;
            }
            
            .box-count-option p {
                font-size: 12px;
                margin: 0;
            }
        }

        .item-icon i {
            font-size: 32px;
            color: #5c6c7c;
        }

        .item-card.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
        }

        .item-card.selected .item-icon i {
            color: #4a90e2;
        }

        .item-card.selected .item-name {
            color: #4a90e2;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            padding: 24px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            position: relative;
        }

        .option-group {
            margin-bottom: 20px;
        }

        .option-label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 12px;
            color: #2c3e50;
        }

        .option-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .option-button {
            flex: 1 1 calc(33.333% - 8px);
            min-width: 80px;
            padding: 12px 8px;
            border: 2px solid #eef0f3;
            border-radius: 8px;
            background: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .option-button.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
            color: #4a90e2;
        }

        .modal-buttons {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            margin-top: 24px;
        }

        .reset-button, .confirm-button {
            padding: 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            flex: 1;
            transition: all 0.3s ease;
        }

        .reset-button {
            background: #fff;
            border: 1px solid #ddd;
            color: #666;
        }

        .reset-button:hover {
            background: #f8f9fa;
        }

        .confirm-button {
            background: #4a90e2;
            border: none;
            color: #fff;
            font-size: 18px;
        }

        .confirm-button:hover {
            background: #357abd;
        }

        @media (max-width: 768px) {
            .modal-buttons {
                position: sticky;
                bottom: 0;
                background: #fff;
                padding: 16px 0;
                margin: 0 -20px -24px;
                border-top: 1px solid #eee;
            }

            .reset-button, .confirm-button {
                padding: 16px;
                font-size: 16px;
            }
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 8px;
            width: fit-content;
        }

        .quantity-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: #fff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a90e2;
            border: 1px solid #4a90e2;
        }

        .quantity-input {
            width: 50px;
            text-align: center;
            border: none;
            background: transparent;
            font-size: 16px;
            font-weight: 500;
        }

        .quantity-input::-webkit-inner-spin-button,
        .quantity-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* 선택된 옵션 표시 영역 */
        .selected-options {
            margin-top: 20px;
            padding: 16px;
            background: #f8fbff;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .selected-option-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            color: #2c3e50;
        }

        .selected-option-item:last-child {
            margin-bottom: 0;
        }

        .selected-option-label {
            font-weight: 500;
            color: #4a5568;
        }

        .selected-option-value {
            color: #2d3748;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .option-button {
                font-size: 13px;
                padding: 10px 6px;
            }
            
            .modal-content {
                padding: 20px 16px;
            }

            .option-buttons {
                gap: 6px;
            }

            .option-button {
                flex: 1 1 calc(33.333% - 6px);
            }
        }

        .item-card {
            position: relative;
        }

        .item-quantity {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4a90e2;
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
            display: none;
        }

        .item-card.selected .item-quantity {
            display: block;
        }

        .quantity-controls {
            display: none;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #f8f9fa;
            border-radius: 8px;
            padding: 4px;
            gap: 8px;
            align-items: center;
        }

        .item-card.selected .quantity-controls {
            display: flex;
        }

        .quantity-btn-small {
            width: 24px;
            height: 24px;
            border: 1px solid #4a90e2;
            background: white;
            border-radius: 4px;
            color: #4a90e2;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .quantity-btn-small:hover {
            background: #f8fbff;
        }

        .quantity-input-small {
            width: 32px;
            text-align: center;
            border: none;
            background: transparent;
            font-size: 14px;
        }

        .item-card.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
        }

        .item-card.selected .item-icon i,
        .item-card.selected .item-name {
            color: #4a90e2;
        }

        .item-quantity {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4a90e2;
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
            display: none;
        }

        .item-card.selected .item-quantity {
            display: block;
        }

        /* 모바일 스타일 */
        @media (max-width: 768px) {
            .modal {
                align-items: flex-end;
            }

            .modal-content {
                width: 100%;
                max-width: 100%;
                border-radius: 20px 20px 0 0;
                padding: 24px 20px;
                transform: translateY(100%);
                transition: transform 0.3s ease-out;
            }

            .modal.show .modal-content {
                transform: translateY(0);
            }

            .modal-content::before {
                content: '';
                display: block;
                width: 40px;
                height: 4px;
                background-color: #e2e8f0;
                border-radius: 2px;
                margin: -8px auto 20px;
            }

            .modal-buttons {
                position: sticky;
                bottom: 0;
                background: #fff;
                padding: 16px;
                margin: 24px -20px -24px;
                border-top: 1px solid #eee;
            }
        }

        /* 선택된 아이템 카드 스타일 강화 */
        .item-card.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
        }

        .item-card.selected .item-icon i,
        .item-card.selected .item-name,
        .item-card.selected span {
            color: #4a90e2;
        }

        .item-quantity {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4a90e2;
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .item-card.selected .item-quantity {
            display: block;
        }

        /* 선택 애니메이션 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 선택 효과 강화 */
        .item-card.selected::after {
            content: '✓';
            position: absolute;
            top: 10px;
            left: 10px;
            color: #4a90e2;
            font-size: 16px;
            font-weight: bold;
        }

        /* 단순 수량 아이템 카드 수정 */
        .simple-item .quantity-controls {
            display: none;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #f8f9fa;
            border-radius: 8px;
            padding: 4px;
            gap: 8px;
            align-items: center;
        }

        .simple-item.selected .quantity-controls {
            display: flex;
        }

        .simple-item .quantity-btn-small {
            width: 24px;
            height: 24px;
            border: 1px solid #4a90e2;
            background: white;
            border-radius: 4px;
            color: #4a90e2;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .simple-item .quantity-input-small {
            width: 32px;
            text-align: center;
            border: none;
            background: transparent;
            font-size: 14px;
        }

        /* 선택된 옵션 정보 표시 스타일 추가 */
        .item-options-summary {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            font-size: 11px;
            color: #4a90e2;
            background: #f8fbff;
            padding: 4px 8px;
            border-radius: 6px;
            display: none;
            /* white-space: nowrap; 제거 */
            line-height: 1.3;
            max-height: 40px;
            overflow-y: auto;
            text-align: center;
            word-break: keep-all;
            /* 스크롤바 스타일링 */
            scrollbar-width: thin;
            scrollbar-color: #4a90e2 #f8fbff;
        }

        /* 웹킷 브라우저용 스크롤바 스타일링 */
        .item-options-summary::-webkit-scrollbar {
            width: 4px;
        }

        .item-options-summary::-webkit-scrollbar-track {
            background: #f8fbff;
        }

        .item-options-summary::-webkit-scrollbar-thumb {
            background-color: #4a90e2;
            border-radius: 2px;
        }

        /* 아이템 카드 패딩 조정 */
        .item-card {
            padding-bottom: 60px; /* 요약 정보를 위한 공간 확보 */
        }

        .item-card.selected .item-options-summary {
            display: block;
        }

        /* 모바일 대응 */
        @media (max-width: 768px) {
            .item-options-summary {
                font-size: 10px;
                padding: 3px 6px;
                max-height: 35px;
            }
            
            .item-card {
                padding-bottom: 50px;
            }
        }

        /* 소형가전 선택 시 테두리 강조 효과 수정 */
        .simple-item.selected {
            border-color: #4a90e2;
            background-color: #f8fbff;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
            transform: translateY(-2px);
            animation: glow 1.5s infinite alternate;
        }

        /* 빛나는 효과 애니메이션 */
        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
            }
            to {
                box-shadow: 0 0 20px rgba(74, 144, 226, 1);
            }
        }

        .simple-item.selected .item-icon span {
            color: #4a90e2;
        }

        .simple-item.selected .item-name {
            color: #4a90e2;
        }

        /* 선택 체크마크 */
        .simple-item.selected::after {
            content: '✓';
            position: absolute;
            top: 10px;
            left: 10px;
            color: #4a90e2;
            font-size: 16px;
            font-weight: bold;
        }

        /* 기존 스타일은 유지하고 아래 스타일 추가 또는 수정 */
        .simple-item .item-icon img {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }

        .simple-item.selected .item-icon img {
            filter: brightness(0) saturate(100%) invert(47%) sepia(82%) 
                    saturate(1162%) hue-rotate(182deg) brightness(96%) contrast(98%);
            transition: filter 0.2s ease;
        }

        .simple-item.selected .item-name {
            color: #4a90e2;
            transition: color 0.2s ease;
        }

        .simple-item .quantity-controls {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 4px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .simple-item.selected .quantity-controls {
            display: flex;
        }

        /* 소형가전 카드 기본 스타일 */
        .simple-item {
            position: relative;
            background: #fff;
            border: 2px solid #eef0f3;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            padding-bottom: 40px;
        }

        /* 소형가전 선택 시 시각적 효과 */
        .simple-item.selected {
            border-color: #4a90e2 !important;
            background-color: #f8fbff !important;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15) !important;
            transform: translateY(-2px);
            animation: glow 1.5s infinite alternate !important;
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
            }
            to {
                box-shadow: 0 0 20px rgba(74, 144, 226, 1);
            }
        }
    </style>
</head>
<body>
    <div class="quote-form-container">
        <!-- 진행 상태 바 -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 75%"></div>
            </div>
            <div class="progress-labels">
                <div class="progress-label">이사 일정</div>
                <div class="progress-label">이사 종류</div>
                <div class="progress-label active">이사 품목</div>
                <div class="progress-label">상세 정보</div>
            </div>
        </div>

        <h2 class="form-title">소형이사 견적 신청</h2>
        
        <form id="smallMoveItemsForm">
            <!-- 가구 선택 섹션 -->
            <div class="form-group">
                <label class="form-label">가구 선택 <span class="optional-label">(중복선택 가능)</span></label>
                <div class="items-grid">
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="침대">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/bed.png" alt="침대">
                        </div>
                        <p class="item-name">침대</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="옷장">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/wardrobe.png" alt="옷장">
                        </div>
                        <p class="item-name">옷장</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="책장">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/bookshelf.png" alt="책장">
                        </div>
                        <p class="item-name">책장</p>
                        <!-- 옵션 요약 표시 요소 추가 -->
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="책상">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/desk.png" alt="책상">
                        </div>
                        <p class="item-name">책상</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="의자">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/chair.png" alt="의자">
                        </div>
                        <p class="item-name">의자</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="테이블">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/table.png" alt="테이블">
                        </div>
                        <p class="item-name">테이블</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="소파">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/sofa.png" alt="소파">
                        </div>
                        <p class="item-name">소파</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="화장대">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/dressing-table.png" alt="화장대">
                        </div>
                        <p class="item-name">화장대</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="수납장">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/cabinet.png" alt="수납장">
                        </div>
                        <p class="item-name">수납장</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="furniture" value="서랍장">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/drawer.png" alt="서랍장">
                        </div>
                        <p class="item-name">서랍장</p>
                        <div class="item-options-summary"></div>
                    </div>
                </div>
            </div>

            <!-- 가전 선택 섹션 -->
            <div class="form-group">
                <label class="form-label">가전 선택 <span class="optional-label">(중복선택 가능)</span></label>
                <div class="items-grid">
                    <div class="item-card">
                        <input type="checkbox" name="appliances" value="TV/모니터">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/tv.png" alt="TV/모니터">
                        </div>
                        <p class="item-name">TV/모니터</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="appliances" value="세탁기">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/washing-machine.png" alt="세탁기">
                        </div>
                        <p class="item-name">세탁기</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="appliances" value="건조기">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/dryer.png" alt="건조기">
                        </div>
                        <p class="item-name">건조기</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="appliances" value="에어컨">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/air-conditioner.png" alt="에어컨">
                        </div>
                        <p class="item-name">에어컨</p>
                        <div class="item-options-summary"></div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="appliances" value="냉장고">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/refrigerator.png" alt="냉장고">
                        </div>
                        <p class="item-name">냉장고</p>
                        <div class="item-options-summary"></div>
                    </div>
                </div>
            </div>

            <!-- 소형가전 선택 섹션 -->
            <div class="form-group">
                <label class="form-label">소형가전 선택 <span class="optional-label">(중복선택 가능)</span></label>
                <div class="items-grid">
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="의류관리기">
                        <div class="item-quantity"></div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/clothes-manager.png" alt="의류관리기">
                        </div>
                        <p class="item-name">의류관리기</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls" style="display: none;">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    
                    <!-- 나머지 소형가전 카드들도 동일한 형식으로 추가 -->
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="전자레인지">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/microwave.png" alt="전자레인지">
                        </div>
                        <p class="item-name">전자레인지</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="정수기">
                        <div class="item-quantity">1개</div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/water-purifier.png" alt="정수기">
                        </div>
                        <p class="item-name">정수기</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="가스레인지">
                        <div class="item-quantity"></div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/gas-stove.png" alt="가스레인지">
                        </div>
                        <p class="item-name">가스레인지</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls" style="display: none;">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="비데">
                        <div class="item-quantity"></div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/bidet.png" alt="비데">
                        </div>
                        <p class="item-name">비데</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls" style="display: none;">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="공기청정기">
                        <div class="item-quantity"></div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/air-purifier.png" alt="공기청정기">
                        </div>
                        <p class="item-name">공기청정기</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls" style="display: none;">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="캣타워">
                        <div class="item-quantity"></div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/cat-tower.png" alt="캣타워">
                        </div>
                        <p class="item-name">캣타워</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls" style="display: none;">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                    <div class="item-card">
                        <input type="checkbox" name="small-appliances" value="운동용품">
                        <div class="item-quantity"></div>
                        <div class="item-icon">
                            <img src="//ecimg.cafe24img.com/pg1543b64568399067/er2007/ico/fitness.png" alt="운동용품">
                        </div>
                        <p class="item-name">운동용품</p>
                        <div class="item-options-summary"></div>
                        <div class="quantity-controls" style="display: none;">
                            <button type="button" class="quantity-btn-small minus">-</button>
                            <input type="number" class="quantity-input-small" value="1" min="1" max="99">
                            <button type="button" class="quantity-btn-small plus">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 잔짐(박스) 개수 선택 -->
            <div class="form-group">
                <label class="form-label">잔짐(박스) 개수</label>
                <div class="box-count-selector">
                    <div class="box-count-option" data-value="none">
                        <h4>없음</h4>
                        <p>잔짐 없음</p>
                    </div>
                    <div class="box-count-option" data-value="1-5">
                        <h4>5박스 이하</h4>
                        <p>소량의 짐</p>
                    </div>
                    <div class="box-count-option" data-value="6-10">
                        <h4>6~10박스</h4>
                        <p>적은 양의 짐</p>
                    </div>
                    <div class="box-count-option" data-value="11-15">
                        <h4>11~15박스</h4>
                        <p>보통 양의 짐</p>
                    </div>
                    <div class="box-count-option" data-value="16+">
                        <h4>16박스 이상</h4>
                        <p>많은 양의 짐</p>
                    </div>
                </div>
            </div>

            <!-- 네비게이션 버튼 -->
            <div class="nav-buttons">
                <button type="button" class="nav-button prev-button" onclick="location.href='small-moving-type.html'">
                    <i data-lucide="arrow-left"></i> 이전
                </button>
                <button type="button" class="nav-button next-button" onclick="goToSmallMoveDetails()">
                    다음 <i data-lucide="arrow-right"></i>
                </button>
            </div>
        </form>
    </div>

    <!-- 모달창 추가 (body 태그 안, form 다음에 추가) -->
    <div id="bedModal" class="modal">
        <div class="modal-content">
            <h3>침대 상세 정보</h3>
            <div class="item-options">
                <!-- 크기 선택 -->
                <div class="option-group">
                    <label class="option-label">크기 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="size" data-value="싱글">싱글</button>
                        <button type="button" class="option-button" data-type="size" data-value="슈퍼싱글">슈퍼싱글</button>
                        <button type="button" class="option-button" data-type="size" data-value="더블">더블</button>
                        <button type="button" class="option-button" data-type="size" data-value="퀸">퀸</button>
                        <button type="button" class="option-button" data-type="size" data-value="킹">킹</button>
                    </div>
                </div>

                <!-- 프레임 재질 -->
                <div class="option-group">
                    <label class="option-label">프레임 재질</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="frame" data-value="철제">철제</button>
                        <button type="button" class="option-button" data-type="frame" data-value="목제">목제</button>
                        <button type="button" class="option-button" data-type="frame" data-value="프레임없음">프레임없음</button>
                    </div>
                </div>

                <!-- 분해조립 여부 -->
                <div class="option-group">
                    <label class="option-label">분해조립 여부</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="assembly" data-value="필요">분해조립 필요</button>
                        <button type="button" class="option-button" data-type="assembly" data-value="불필요">분해조립 필요없음</button>
                    </div>
                </div>

                <!-- 수량 선택을 마지막으로 이동 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('bed')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('bed')">확인</button>
            </div>
        </div>
    </div>

    <!-- 옷장 모달 -->
    <div id="wardrobeModal" class="modal">
        <div class="modal-content">
            <h3>옷장 상세 정보</h3>
            <div class="item-options">
                <!-- 너비 선택 -->
                <div class="option-group">
                    <label class="option-label">너비 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="width" data-value="100미만">100cm 미만</button>
                        <button type="button" class="option-button" data-type="width" data-value="100-150">100~150cm</button>
                        <button type="button" class="option-button" data-type="width" data-value="150-200">150~200cm</button>
                        <button type="button" class="option-button" data-type="width" data-value="200초과">200cm 초과</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('wardrobe')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('wardrobe')">확인</button>
            </div>
        </div>
    </div>

    <!-- 책장 모달 -->
    <div id="bookshelfModal" class="modal">
        <div class="modal-content">
            <h3>책장 상세 정보</h3>
            <div class="item-options">
                <!-- 너비 선택 -->
                <div class="option-group">
                    <label class="option-label">너비 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="width" data-value="50미만">50cm 미만</button>
                        <button type="button" class="option-button" data-type="width" data-value="50-100">50~100cm</button>
                        <button type="button" class="option-button" data-type="width" data-value="100-150">100~150cm</button>
                        <button type="button" class="option-button" data-type="width" data-value="150-200">150~200cm</button>
                        <button type="button" class="option-button" data-type="width" data-value="200초과">200cm 초과</button>
                    </div>
                </div>

                <!-- 높이 선택 -->
                <div class="option-group">
                    <label class="option-label">높이 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="height" data-value="50미만">50cm 미만</button>
                        <button type="button" class="option-button" data-type="height" data-value="50-100">50~100cm</button>
                        <button type="button" class="option-button" data-type="height" data-value="100-150">100~150cm</button>
                        <button type="button" class="option-button" data-type="height" data-value="150-200">150~200cm</button>
                        <button type="button" class="option-button" data-type="height" data-value="200초과">200cm 초과</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('bookshelf')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('bookshelf')">확인</button>
            </div>
        </div>
    </div>

    <!-- 책상 모달 -->
    <div id="deskModal" class="modal">
        <div class="modal-content">
            <h3>책상 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="사각">사각</button>
                        <button type="button" class="option-button" data-type="type" data-value="원형">원형</button>
                        <button type="button" class="option-button" data-type="type" data-value="독서실책상">독서실책상</button>
                    </div>
                </div>

                <!-- 크기 선택 -->
                <div class="option-group">
                    <label class="option-label">크기 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="size" data-value="1-2인용">1~2인용</button>
                        <button type="button" class="option-button" data-type="size" data-value="3-4인용">3~4인용</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('desk')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('desk')">확인</button>
            </div>
        </div>
    </div>

    <!-- 의자 모달 -->
    <div id="chairModal" class="modal">
        <div class="modal-content">
            <h3>의자 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="등받이의자">등받이의자</button>
                        <button type="button" class="option-button" data-type="type" data-value="보조의자">보조의자</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('chair')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('chair')">확인</button>
            </div>
        </div>
    </div>

    <!-- 테이블 모달 -->
    <div id="tableModal" class="modal">
        <div class="modal-content">
            <h3>테이블 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="사각">사각</button>
                        <button type="button" class="option-button" data-type="type" data-value="원형">원형</button>
                    </div>
                </div>

                <!-- 크기 선택 -->
                <div class="option-group">
                    <label class="option-label">크기 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="size" data-value="1-2인용">1~2인용</button>
                        <button type="button" class="option-button" data-type="size" data-value="3-4인용">3~4인용</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('table')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('table')">확인</button>
            </div>
        </div>
    </div>

    <!-- 소파 모달 -->
    <div id="sofaModal" class="modal">
        <div class="modal-content">
            <h3>소파 상세 정보</h3>
            <div class="item-options">
                <!-- 크기 선택 -->
                <div class="option-group">
                    <label class="option-label">크기 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="size" data-value="1-2인용">1~2인용</button>
                        <button type="button" class="option-button" data-type="size" data-value="3-4인용">3~4인용</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('sofa')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('sofa')">확인</button>
            </div>
        </div>
    </div>

    <!-- 화장대 모달 -->
    <div id="dressingTableModal" class="modal">
        <div class="modal-content">
            <h3>화장대 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="좌식">좌식</button>
                        <button type="button" class="option-button" data-type="type" data-value="일반">일반</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('dressingTable')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('dressingTable')">확인</button>
            </div>
        </div>
    </div>

    <!-- 수납장 모달 -->
    <div id="cabinetModal" class="modal">
        <div class="modal-content">
            <h3>수납장 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="신발장">신발장</button>
                        <button type="button" class="option-button" data-type="type" data-value="진열장">진열장</button>
                        <button type="button" class="option-button" data-type="type" data-value="TV장식장">TV장식장</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('cabinet')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('cabinet')">확인</button>
            </div>
        </div>
    </div>

    <!-- 서랍장 모달 -->
    <div id="drawerModal" class="modal">
        <div class="modal-content">
            <h3>서랍장 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="3단이하">3단 이하</button>
                        <button type="button" class="option-button" data-type="type" data-value="4단 이상">4단 이상</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('drawer')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('drawer')">확인</button>
            </div>
        </div>
    </div>

    <!-- TV/모니터 모달 -->
    <div id="tvModal" class="modal">
        <div class="modal-content">
            <h3>TV/모니터 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="일반TV">일반 TV</button>
                        <button type="button" class="option-button" data-type="type" data-value="벽걸이TV">벽걸이 TV</button>
                        <button type="button" class="option-button" data-type="type" data-value="모니터">모니터</button>
                    </div>
                </div>

                <!-- 분해조립 여부 -->
                <div class="option-group">
                    <label class="option-label">분해조립 여부</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="assembly" data-value="필요">탈부착 필요</button>
                        <button type="button" class="option-button" data-type="assembly" data-value="불필요">탈부착 불필요</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('tv')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('tv')">확인</button>
            </div>
        </div>
    </div>

    <!-- 세탁기 모달 -->
    <div id="washingMachineModal" class="modal">
        <div class="modal-content">
            <h3>세탁기 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="통돌이">통돌이</button>
                        <button type="button" class="option-button" data-type="type" data-value="드럼">드럼</button>
                    </div>
                </div>

                <!-- 크기 선택 -->
                <div class="option-group">
                    <label class="option-label">크기 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="size" data-value="15KG이하">15KG 이하</button>
                        <button type="button" class="option-button" data-type="size" data-value="15KG초과">15KG 초과</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('washingMachine')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('washingMachine')">확인</button>
            </div>
        </div>
    </div>

    <!-- 건조기 모달 -->
    <div id="dryerModal" class="modal">
        <div class="modal-content">
            <h3>건조기 상세 정보</h3>
            <div class="item-options">
                <!-- 크기 선택 -->
                <div class="option-group">
                    <label class="option-label">크기 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="size" data-value="15KG이하">15KG 이하</button>
                        <button type="button" class="option-button" data-type="size" data-value="15KG초과">15KG 초과</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('dryer')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('dryer')">확인</button>
            </div>
        </div>
    </div>

    <!-- 에어컨 모달 -->
    <div id="airConditionerModal" class="modal">
        <div class="modal-content">
            <h3>에어컨 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="스탠드형">스탠드형</button>
                        <button type="button" class="option-button" data-type="type" data-value="벽걸이형">벽걸이형</button>
                    </div>
                </div>

                <!-- 분리작업 여부 -->
                <div class="option-group">
                    <label class="option-label">분리작업 여부</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="separation" data-value="필요">분리작업 필요</button>
                        <button type="button" class="option-button" data-type="separation" data-value="불필요">분리작업 불필요</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('airConditioner')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('airConditioner')">확인</button>
            </div>
        </div>
    </div>

    <!-- 냉장고 모달 -->
    <div id="refrigeratorModal" class="modal">
        <div class="modal-content">
            <h3>냉장고 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="미니">미니(허리높이미만)</button>
                        <button type="button" class="option-button" data-type="type" data-value="일반형">일반형(허리높이이상)</button>
                        <button type="button" class="option-button" data-type="type" data-value="양문형">양문형 2도어</button>
                        <button type="button" class="option-button" data-type="type" data-value="4도어">4도어</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('refrigerator')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('refrigerator')">확인</button>
            </div>
        </div>
    </div>

    <!-- 의류관리기 모달 -->
    <div id="clothesManagerModal" class="modal">
        <div class="modal-content">
            <h3>의류관리기 상세 정보</h3>
            <div class="item-options">
                <!-- 종류 선택 -->
                <div class="option-group">
                    <label class="option-label">종류 선택</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="type" data-value="일반형">일반형</button>
                        <button type="button" class="option-button" data-type="type" data-value="대형">대형</button>
                    </div>
                </div>

                <!-- 설치 여부 -->
                <div class="option-group">
                    <label class="option-label">설치 여부</label>
                    <div class="option-buttons">
                        <button type="button" class="option-button" data-type="installation" data-value="필요">설치 필요</button>
                        <button type="button" class="option-button" data-type="installation" data-value="불필요">설치 불필요</button>
                    </div>
                </div>

                <!-- 수량 선택 -->
                <div class="option-group">
                    <label class="option-label">수량</label>
                    <div class="quantity-selector">
                        <button type="button" class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99">
                        <button type="button" class="quantity-btn plus">+</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="reset-button" onclick="resetItemOptions('clothesManager')">초기화</button>
                <button type="button" class="confirm-button" onclick="confirmItemOptions('clothesManager')">확인</button>
            </div>
        </div>
    </div>

    <!-- 출처 표시 추가 -->
    <div style="text-align: center; margin-top: 20px; font-size: 12px; color: #666;">
        <a href="https://kr.freepik.com/author/freepik/icons/special-lineal_7" target="_blank" style="color: #666; text-decoration: none;">
            Freepik 제작 아이콘
        </a>
    </div>

    <script src="script.js"></script>
    <script>
        const itemOptions = {
            bed: { size: '', frame: '', assembly: '', quantity: 1 },
            wardrobe: { width: '', quantity: 1 },
            bookshelf: { width: '', height: '', quantity: 1 },
            desk: { type: '', size: '', quantity: 1 },
            chair: { type: '', quantity: 1 },
            table: { type: '', size: '', quantity: 1 },
            sofa: { size: '', quantity: 1 },
            dressingTable: { type: '', quantity: 1 },
            cabinet: { type: '', quantity: 1 },
            drawer: { type: '', quantity: 1 },
            tv: { type: '', assembly: '', quantity: 1 },
            washingMachine: { type: '', size: '', quantity: 1 },
            dryer: { size: '', quantity: 1 },
            airConditioner: { type: '', separation: '', quantity: 1 },
            refrigerator: { type: '', quantity: 1 },
            clothesManager: { type: '', installation: '', quantity: 1 },
            microwave: { type: '', quantity: 1 },
            waterPurifier: { type: '', installation: '', quantity: 1 },
            gasStove: { type: '', quantity: 1 },
            bidet: { installation: '', quantity: 1 },
            airPurifier: { size: '', quantity: 1 },
            catTower: { size: '', quantity: 1 },
            fitness: { type: '', assembly: '', quantity: 1 }
        };

        // 모달 닫기 함수 수정
        function closeModal(type) {
            const modal = document.getElementById(`${type}Modal`);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = '';
                
                // 모바일에서 show 클래스 제거
                modal.classList.remove('show');
            }
        }

        // confirmItemOptions 함수 수정
        function confirmItemOptions(type) {
            const options = itemOptions[type];
            let missingOption = '';

            // 각 아이템별 필수 옵션 체크
            switch(type) {
                case 'bed':
                    if (!options.size) missingOption = '크기를';
                    else if (!options.frame) missingOption = '프레임을';
                    else if (!options.assembly) missingOption = '분해조립 여부를';
                    break;
                case 'wardrobe':
                    if (!options.width) missingOption = '너비를';
                    break;
                case 'bookshelf':
                    if (!options.width) missingOption = '너비를';
                    else if (!options.height) missingOption = '높이를';
                    break;
                case 'desk':
                case 'table':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.size) missingOption = '크기를';
                    break;
                case 'chair':
                case 'dressingTable':
                case 'cabinet':
                case 'drawer':
                case 'refrigerator':
                    if (!options.type) missingOption = '종류를';
                    break;
                case 'tv':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.assembly) missingOption = '분해조립 여부를';
                    break;
                case 'washingMachine':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.size) missingOption = '크기를';
                    break;
                case 'dryer':
                    if (!options.size) missingOption = '크기를';
                    break;
                case 'airConditioner':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.separation) missingOption = '분리작업 여부를';
                    break;
                case 'clothesManager':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.installation) missingOption = '설치 여부를';
                    break;
                case 'microwave':
                    if (!options.type) missingOption = '종류를';
                    break;
                case 'waterPurifier':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.installation) missingOption = '설치 여부를';
                    break;
                case 'gasStove':
                    if (!options.type) missingOption = '종류를';
                    break;
                case 'bidet':
                    if (!options.installation) missingOption = '설치 여부를';
                    break;
                case 'airPurifier':
                case 'catTower':
                    if (!options.size) missingOption = '크기를';
                    break;
                case 'fitness':
                    if (!options.type) missingOption = '종류를';
                    else if (!options.assembly) missingOption = '분해조립 여부를';
                    break;
            }

            if (missingOption) {
                alert(`${missingOption} 선택해주세요.`);
                return;
            }

            // 선택된 옵션 저장 및 시각적 피드백
            const checkbox = document.querySelector(`input[value="${getKoreanType(type)}"]`);
            if (checkbox) {
                checkbox.dataset.options = JSON.stringify(options);
                checkbox.checked = true;
                
                const card = checkbox.closest('.item-card');
                if (card) {
                    card.classList.add('selected');
                    
                    // 수량 표시 업데이트
                    const quantityDisplay = card.querySelector('.item-quantity');
                    if (quantityDisplay) {
                        quantityDisplay.textContent = `${options.quantity || 1}개`;
                        quantityDisplay.style.display = 'block';
                    }
                    
                    // 옵션 정보 요약 표시
                    const summaryDisplay = card.querySelector('.item-options-summary');
                    if (summaryDisplay) {
                        let summary = [];
                        if (options.size) summary.push(options.size);
                        if (options.type) summary.push(options.type);
                        if (options.width) summary.push(`너비 ${options.width}`);
                        if (options.height) summary.push(`높이 ${options.height}`);
                        if (options.frame) summary.push(options.frame);
                        if (options.assembly) summary.push(options.assembly === '필요' ? '분해필요' : '분해불필요');
                        if (options.separation) summary.push(options.separation === '필요' ? '분리필요' : '분리불필요');
                        if (options.installation) summary.push(options.installation === '필요' ? '설치필요' : '설치불필요');
                        summaryDisplay.textContent = summary.join(' · ');
                    }
                }
            }

            // 선택 상태를 localStorage에 저장
            saveSelectedItems();

            closeModal(type);
        }

        // 옵션 버튼 클릭 시 선택된 옵션 업데이트
        document.querySelectorAll('.option-button').forEach(button => {
            button.addEventListener('click', function() {
                const type = this.dataset.type;
                const value = this.dataset.value;
                const modalId = this.closest('.modal').id;
                const itemType = modalId.replace('Modal', '');
                
                document.querySelectorAll(`.option-button[data-type="${type}"]`).forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                this.classList.add('selected');
                itemOptions[itemType][type] = value;
            });
        });

        // 수량 변경 시 동기화 처리 추가
        document.querySelectorAll('.quantity-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const input = this.parentElement.querySelector('.quantity-input');
                const modalId = this.closest('.modal').id;
                const itemType = modalId.replace('Modal', '');
                
                if (this.classList.contains('minus') && input.value > 1) {
                    input.value = parseInt(input.value) - 1;
                } else if (this.classList.contains('plus') && input.value < 99) {
                    input.value = parseInt(input.value) + 1;
                }
                
                // 수량 업데이트
                itemOptions[itemType].quantity = parseInt(input.value);
                
                // 카드의 수량 표시도 업데이트
                const checkbox = document.querySelector(`input[value="${getKoreanType(itemType)}"]`);
                if (checkbox) {
                    const card = checkbox.closest('.item-card');
                    const quantityDisplay = card.querySelector('.item-quantity');
                    if (quantityDisplay) {
                        quantityDisplay.textContent = `${input.value}개`;
                    }
                }
            });
        });

        // 아이템 카드 클릭 이벤트 수정
        document.querySelectorAll('.item-card').forEach(card => {
            card.addEventListener('click', function(e) {
                const checkbox = this.querySelector('input[type="checkbox"]');
                // 수량 조절 관련 요소 클릭은 이벤트 처리만 하고 선택 상태는 변경하지 않음
                if (e.target.closest('.quantity-controls')) {
                    return;
                }

                const itemType = checkbox.value;
                
                // 체크박스 직접 클릭은 무시
                if (e.target.type === 'checkbox') return;

                // 모달이 필요한 아이템 목록
                const modalItems = ['침대', '옷장', '책장', '책상', '의자', '테이블', '소파', 
                    '화장대', '수납장', '서랍장', 'TV/모니터', '세탁기', '건조기', '에어컨', '냉장고'];

                if (modalItems.includes(itemType)) {
                    // 모달 표시
                    const modalType = getModalType(itemType);
                    showItemModal(modalType);
                } else {
                    // 일반 아이템은 바로 선택/해제
                    checkbox.checked = !checkbox.checked;
                    this.classList.toggle('selected', checkbox.checked);
                    
                    // 선택 시 기본 옵션 설정
                    if (checkbox.checked) {
                        const options = { quantity: 1 };
                        checkbox.dataset.options = JSON.stringify(options);
                        const quantityDisplay = this.querySelector('.item-quantity');
                        if (quantityDisplay) {
                            quantityDisplay.textContent = '1개';
                            quantityDisplay.style.display = 'block';
                        }
                        // 수량 컨트롤 표시
                        const quantityControls = this.querySelector('.quantity-controls');
                        if (quantityControls) {
                            quantityControls.style.display = 'flex';
                        }
                        // 선택 상태 저장
                        saveSelectedItems();
                    } else {
                        // 선택 해제 시 초기화
                        checkbox.dataset.options = '';
                        const quantityDisplay = this.querySelector('.item-quantity');
                        if (quantityDisplay) {
                            quantityDisplay.textContent = '';
                            quantityDisplay.style.display = 'none';
                        }
                        // 수량 컨트롤 숨기기
                        const quantityControls = this.querySelector('.quantity-controls');
                        if (quantityControls) {
                            quantityControls.style.display = 'none';
                        }
                        // 선택 해제 상태 저장
                        saveSelectedItems();
                    }
                }
            });
        });

        // 선택한 물품 저장 함수
        function saveSelectedItems() {
            const selectedItems = [];
            document.querySelectorAll('.item-card input[type="checkbox"]:checked').forEach(checkbox => {
                const options = JSON.parse(checkbox.dataset.options || '{}');
                selectedItems.push({
                    name: checkbox.value,
                    options: options
                });
            });
            
            let moveData = JSON.parse(localStorage.getItem('moveQuoteData') || '{}');
            moveData.selectedItems = selectedItems;
            localStorage.setItem('moveQuoteData', JSON.stringify(moveData));
        }

        // 아이템 타입을 모달 타입으로 변환
        function getModalType(itemType) {
            const typeMap = {
                '침대': 'bed',
                '옷장': 'wardrobe',
                '책장': 'bookshelf',
                '책상': 'desk',
                '의자': 'chair',
                '테이블': 'table',
                '소파': 'sofa',
                '화장대': 'dressingTable',
                '수납장': 'cabinet',
                '서랍장': 'drawer',
                'TV/모니터': 'tv',
                '세탁기': 'washingMachine',
                '건조기': 'dryer',
                '에어컨': 'airConditioner',
                '냉장고': 'refrigerator',
                '의류관리기': 'clothesManager',
                '전자레인지': 'microwave',
                '정수기': 'waterPurifier',
                '가스레인지': 'gasStove',
                '비데': 'bidet',
                '공기청정기': 'airPurifier',
                '캣타워': 'catTower',
                '운동용품': 'fitness'
            };
            return typeMap[itemType];
        }

        // 아이템 옵션 초기화 함수 수정
        function resetItemOptions(type) {
            // 옵션 초기화
            itemOptions[type] = { quantity: 1 };
            
            // 모달 내 선택된 버튼들 초기화
            const modal = document.getElementById(`${type}Modal`);
            modal.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // 수량 초기화
            const quantityInput = modal.querySelector('.quantity-input');
            if (quantityInput) {
                quantityInput.value = 1;
            }
            
            // 체크박스와 카드 선택 상태 초기화
            const checkbox = document.querySelector(`input[value="${getKoreanType(type)}"]`);
            if (checkbox) {
                // 체크박스 선택 해제
                checkbox.checked = false;
                // 데이터 초기화
                checkbox.dataset.options = '';
                
                // 카드 선택 상태 해제
                const card = checkbox.closest('.item-card');
                if (card) {
                    card.classList.remove('selected');
                    // 수량 표시 초기화
                    const quantityDisplay = card.querySelector('.item-quantity');
                    const quantityInput = card.querySelector('.quantity-input-small');
                    if (quantityDisplay) {
                        quantityDisplay.textContent = '';
                    }
                    if (quantityInput) {
                        quantityInput.value = '1';  // 수량 입력 필드도 1로 초기화
                    }
                    // 옵션 요약 정보 초기화
                    const summaryDisplay = card.querySelector('.item-options-summary');
                    if (summaryDisplay) {
                        summaryDisplay.textContent = '';
                    }
                    // 수량 컨트롤 숨기기
                    const quantityControls = card.querySelector('.quantity-controls');
                    if (quantityControls) {
                        quantityControls.style.display = 'none';
                    }
                }
            }
            
            // 모달 닫기
            closeModal(type);
        }

        // 모달 표시 함수 수정
        function showItemModal(type) {
            const modal = document.getElementById(`${type}Modal`);
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // 이전에 저장된 수량이 있다면 복원
            const checkbox = document.querySelector(`input[value="${getKoreanType(type)}"]`);
            if (checkbox && checkbox.dataset.options) {
                const savedOptions = JSON.parse(checkbox.dataset.options);
                if (savedOptions.quantity) {
                    const quantityInput = modal.querySelector('.quantity-input');
                    if (quantityInput) {
                        quantityInput.value = savedOptions.quantity;
                    }
                }
            }
            
            if (window.innerWidth <= 768) {
                // 모바일에는 애니메이션 적용
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
            
            // 모달이 열릴 때 선택된 옵션 표시
            updateSelectedOptions(type);
        }

        // 선택된 옵션 표시 업데이트 함수 제거
        function updateSelectedOptions(type) {
            const options = itemOptions[type];
            const modal = document.getElementById(`${type}Modal`);
            const selectedOptionsDiv = modal.querySelector('.selected-options');
            
            // 선택된 옵션을 표시
            let optionsHTML = '';
            for (const [key, value] of Object.entries(options)) {
                if (key !== 'quantity' && value) {
                    optionsHTML += `
                        <div class="selected-option-item">
                            <span class="selected-option-label">${key}:</span>
                            <span class="selected-option-value">${value}</span>
                        </div>
                    `;
                }
            }
            
            // 수량 업데이트
            const quantityInput = modal.querySelector('.quantity-input');
            if (quantityInput) {
                quantityInput.value = options.quantity || 1;
            }
            
            selectedOptionsDiv.innerHTML = optionsHTML;
        }

        // 모달 외부 클릭 시 닫기 이벤트 추가
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    const type = this.id.replace('Modal', '');
                    closeModal(type);
                }
            });
        });

        // 잔짐 박스 개수 선택 이벤트 추가
        document.querySelectorAll('.box-count-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.box-count-option').forEach(el => {
                    el.classList.remove('selected');
                });
                this.classList.add('selected');
                
                // 선택한 박스 개수 저장
                let moveData = JSON.parse(localStorage.getItem('moveQuoteData') || '{}');
                moveData.boxCount = this.dataset.value;
                localStorage.setItem('moveQuoteData', JSON.stringify(moveData));
            });
        });

        // 기존 script 태그 내부의 코드를 수집

        // simple-item 관련 코드 수정
        document.querySelectorAll('.form-group .item-card').forEach(card => {
            const checkbox = card.querySelector('input[type="checkbox"]');
            const quantityDisplay = card.querySelector('.item-quantity');
            const quantityControls = card.querySelector('.quantity-controls');
            const input = quantityControls?.querySelector('.quantity-input-small');
            const minusBtn = quantityControls?.querySelector('.minus');
            const plusBtn = quantityControls?.querySelector('.plus');

            // 카드 클릭 이벤트
            card.addEventListener('click', function(e) {
                // 수량 조절 관련 요소 클릭은 무시
                if (e.target.closest('.quantity-controls')) {
                    e.stopPropagation();
                    return;
                }

                // 체크박스 직접 클릭은 무시
                if (e.target.type === 'checkbox') {
                    e.stopPropagation();
                    return;
                }

                // 모달이 필요한 아이템 목록
                const modalItems = ['침대', '옷장', '책장', '책상', '의자', '테이블', '소파', 
                    '화장대', '수납장', '서랍장', 'TV/모니터', '세탁기', '건조기', '에어컨', '냉장고'];

                // 모달이 필요한 아이템이 아닌 경에만 처리
                if (!modalItems.includes(checkbox.value)) {
                    checkbox.checked = !checkbox.checked;
                    card.classList.toggle('selected', checkbox.checked);

                    if (checkbox.checked) {
                        // 선택 시
                        quantityDisplay.textContent = '1개';
                        quantityDisplay.style.display = 'block';
                        quantityControls.style.display = 'flex';
                        input.value = 1;
                        const options = { quantity: 1 };
                        checkbox.dataset.options = JSON.stringify(options);
                    } else {
                        // 선택 해제 시 초기화
                        quantityDisplay.textContent = '';
                        quantityDisplay.style.display = 'none';
                        quantityControls.style.display = 'none';
                        input.value = 1;
                        checkbox.dataset.options = '';
                    }
                }
            });

            // 수량 조절 버튼 이벤트는 그대로 유지
            // ... 나머지 코드 ...
        });

        // 옵션 타입을 한글로 변환하는 수 추가
        function getKoreanType(type) {
            const typeMap = {
                'bed': '침대',
                'wardrobe': '옷장',
                'bookshelf': '책장',
                'desk': '책상',
                'chair': '의자',
                'table': '테이블',
                'sofa': '소파',
                'dressingTable': '화장대',
                'cabinet': '수납장',
                'drawer': '서랍장',
                'tv': 'TV/모니터',
                'washingMachine': '세탁기',
                'dryer': '건조기',
                'airConditioner': '에어컨',
                'refrigerator': '냉장고',
                'clothesManager': '의류관리기',
                'microwave': '전자레인지',
                'waterPurifier': '정수기',
                'gasStove': '가스레인지',
                'bidet': '비데',
                'airPurifier': '공기청정기',
                'catTower': '캣타워',
                'fitness': '운동용품'
            };
            return typeMap[type];
        }

        function toggleCard(card) {
            // 카드의 선택 상태 토글
            card.classList.toggle('selected');
            
            // 수량 컨트롤 요소 찾기
            const quantityControls = card.querySelector('.quantity-controls');
            
            // 카드가 선택된 상태인지 확인
            if (card.classList.contains('selected')) {
                // 선택된 경우 수량 컨트롤 표시
                quantityControls.style.display = 'flex';
            } else {
                // 선택 해제된 경우 수량 컨트롤 숨기고 수량 초기화
                quantityControls.style.display = 'none';
                card.querySelector('.quantity').textContent = '1';
            }
        }

        function decreaseQuantity(event, button) {
            event.stopPropagation(); // 이벤트 버블링 방지
            const quantitySpan = button.parentElement.querySelector('.quantity');
            let quantity = parseInt(quantitySpan.textContent);
            if (quantity > 1) {
                quantitySpan.textContent = quantity - 1;
            }
        }

        function increaseQuantity(event, button) {
            event.stopPropagation(); // 이벤트 버블링 방지
            const quantitySpan = button.parentElement.querySelector('.quantity');
            let quantity = parseInt(quantitySpan.textContent);
            quantitySpan.textContent = quantity + 1;
        }

        // 수량 조절 이벤트 리스너 추가
        document.querySelectorAll('.quantity-btn-small').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const card = this.closest('.item-card');
                const input = card.querySelector('.quantity-input-small');
                const quantityDisplay = card.querySelector('.item-quantity');
                const currentValue = parseInt(input.value) || 1;
                
                if (this.classList.contains('minus') && currentValue > 1) {
                    const newValue = currentValue - 1;
                    input.value = newValue;
                    quantityDisplay.textContent = `${newValue}개`;
                    updateItemQuantity(card, newValue);
                } else if (this.classList.contains('plus') && currentValue < 99) {
                    const newValue = currentValue + 1;
                    input.value = newValue;
                    quantityDisplay.textContent = `${newValue}개`;
                    updateItemQuantity(card, newValue);
                }
            });
        });

        // 수량 입력 필드 이벤트 리스너
        document.querySelectorAll('.quantity-input-small').forEach(input => {
            input.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
            });
            
            input.addEventListener('change', function() {
                const card = this.closest('.item-card');
                const quantityDisplay = card.querySelector('.item-quantity');
                let value = parseInt(this.value) || 1;
                
                // 값 범위 제한
                if (value < 1) value = 1;
                if (value > 99) value = 99;
                
                this.value = value;
                quantityDisplay.textContent = `${value}개`;
                updateItemQuantity(card, value);
            });
        });

        // 아이템 수량 업데이트 함수
        function updateItemQuantity(card, quantity) {
            const checkbox = card.querySelector('input[type="checkbox"]');
            if (checkbox && checkbox.dataset.options) {
                const options = JSON.parse(checkbox.dataset.options);
                options.quantity = quantity;
                checkbox.dataset.options = JSON.stringify(options);
            }
        }

        // 카드 클릭 이벤트 수정
        document.querySelectorAll('.item-card').forEach(card => {
            card.addEventListener('click', function(e) {
                const checkbox = this.querySelector('input[type="checkbox"]');
                // 수량 조절 관련 요소 클릭은 무시
                if (e.target.closest('.quantity-controls')) {
                    return;
                }

                const itemType = checkbox.value;
                
                // 체크박스 직접 클릭은 무시
                if (e.target.type === 'checkbox') return;

                // 모달이 필요한 아이템 목록
                const modalItems = ['침대', '옷장', '책장', '책상', '의자', '테이블', '소파', 
                    '화장대', '수납장', '서랍장', 'TV/모니터', '세탁기', '건조기', '에어컨', '냉장고'];

                if (modalItems.includes(itemType)) {
                    // 모달 표시
                    const modalType = getModalType(itemType);
                    showItemModal(modalType);
                } else {
                    // 일반 아이템은 바로 선택/해제
                    checkbox.checked = !checkbox.checked;
                    this.classList.toggle('selected', checkbox.checked);
                    
                    // 선택 시 기본 옵션 설정
                    if (checkbox.checked) {
                        const options = { quantity: 1 };
                        checkbox.dataset.options = JSON.stringify(options);
                        const quantityDisplay = this.querySelector('.item-quantity');
                        if (quantityDisplay) {
                            quantityDisplay.textContent = '1개';
                            quantityDisplay.style.display = 'block';
                        }
                        // 수량 컨트롤 표시
                        const quantityControls = this.querySelector('.quantity-controls');
                        if (quantityControls) {
                            quantityControls.style.display = 'flex';
                        }
                        // 선택 상태 저장
                        saveSelectedItems();
                    } else {
                        // 선택 해제 시 초기화
                        checkbox.dataset.options = '';
                        const quantityDisplay = this.querySelector('.item-quantity');
                        if (quantityDisplay) {
                            quantityDisplay.textContent = '';
                            quantityDisplay.style.display = 'none';
                        }
                        // 수량 컨트롤 숨기기
                        const quantityControls = this.querySelector('.quantity-controls');
                        if (quantityControls) {
                            quantityControls.style.display = 'none';
                        }
                        // 선택 해제 상태 저장
                        saveSelectedItems();
                    }
                }
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            
            // 저장된 데이터 불러오기
            const moveData = JSON.parse(localStorage.getItem('moveQuoteData') || '{}');
            
            // 가구 선택 상태 복원
            if (moveData.selectedItems) {
                moveData.selectedItems.forEach(item => {
                    const checkbox = document.querySelector(`input[value="${item.name}"]`);
                    if (checkbox) {
                        // 체크박스 상태와 옵션 복원
                        checkbox.checked = true;
                        checkbox.dataset.options = JSON.stringify(item.options);
                        
                        // itemOptions 객체에도 옵션 복원 (모달용)
                        const modalType = getModalType(item.name);
                        if (modalType) {
                            itemOptions[modalType] = item.options;
                        }
                        
                        const card = checkbox.closest('.item-card');
                        if (card) {
                            card.classList.add('selected');
                            
                            // 수량 표시 복원
                            const quantityDisplay = card.querySelector('.item-quantity');
                            if (quantityDisplay) {
                                quantityDisplay.textContent = `${item.options.quantity}개`;
                                quantityDisplay.style.display = 'block';
                            }
                            
                            // 수량 컨트롤 복원
                            const quantityControls = card.querySelector('.quantity-controls');
                            if (quantityControls) {
                                quantityControls.style.display = 'flex';
                                const input = quantityControls.querySelector('.quantity-input-small');
                                if (input) {
                                    input.value = item.options.quantity;
                                }
                            }
                            
                            // 옵션 요약 정보 복원
                            const summaryDisplay = card.querySelector('.item-options-summary');
                            if (summaryDisplay && item.options) {
                                let summary = [];
                                if (item.options.size) summary.push(item.options.size);
                                if (item.options.type) summary.push(item.options.type);
                                if (item.options.width) summary.push(`너비 ${item.options.width}`);
                                if (item.options.height) summary.push(`높이 ${item.options.height}`);
                                if (item.options.frame) summary.push(item.options.frame);
                                if (item.options.assembly) summary.push(item.options.assembly === '필요' ? '분해필요' : '분해불필요');
                                if (item.options.separation) summary.push(item.options.separation === '필요' ? '분리필요' : '분리불필요');
                                if (item.options.installation) summary.push(item.options.installation === '필요' ? '설치필요' : '설치불필요');
                                summaryDisplay.textContent = summary.join(' · ');
                            }
                        }
                    }
                });
            }
            
            // 박스 개수 선택 복원
            if (moveData.boxCount) {
                const boxOption = document.querySelector(`.box-count-option[data-value="${moveData.boxCount}"]`);
                if (boxOption) {
                    boxOption.classList.add('selected');
                }
            }
        });

        // goToSmallMoveDetails 함수 수정
        async function goToSmallMoveDetails() {
            // 선택된 가구와 옵션들 수집
            const selectedItems = [];
            document.querySelectorAll('.item-card input[type="checkbox"]:checked').forEach(checkbox => {
                const options = JSON.parse(checkbox.dataset.options || '{}');
                selectedItems.push({
                    name: checkbox.value,
                    options: options
                });
            });

            // 선택된 박스 개수 수집
            const selectedBoxCount = document.querySelector('.box-count-option.selected')?.dataset.value;
            if (!selectedBoxCount) {
                alert('잔짐(박스) 개수를 선택해주세요.');
                return;
            }

            try {
                // localStorage에 저장
                let moveData = JSON.parse(localStorage.getItem('moveQuoteData') || '{}');
                moveData.selectedItems = selectedItems;
                moveData.boxCount = selectedBoxCount;
                localStorage.setItem('moveQuoteData', JSON.stringify(moveData));

                // 다음 페이지로 이동
                window.location.href = 'small-moving-details.html';
            } catch (error) {
                alert('견적 신청 중 오류가 발생했습니다.');
            }
        }

        const WEBHOOK_URL = 'https://discord.com/api/webhooks/1316231070441803816/3ELVqV5Qu73OT5L1ekSKGeqRfDXgyQMdNmRZBu840XZpsMgBbFqdiOIKVSNGkT_Tw1Ck';

        document.getElementById('smallMoveItemsForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            let message = '**[소형 이사 물품 리스트 신청]**\n```\n';
            
            for (let [key, value] of formData.entries()) {
                message += `${key}: ${value}\n`;
            }
            message += '```';
            
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: message
                    })
                });
                alert('견적 신청이 완료되었습니다.');
                this.reset();
            } catch (error) {
                alert('견적 신청 중 오류가 발생했습니다.');
            }
        });
    </script>
</body>
</html> 